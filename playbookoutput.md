
playbook: site.yml

  play #1 (sharedhosting): sharedhosting	TAGS: []
    pattern: [u'sharedhosting']
    hosts (6):
      sh02.brand1.com
      sh01.brand1.com
      sh07.brand1.com
      sh01.brand2.com
      sh05.brand1.com
      sh02.brand2.com
    tasks:
      common : Check if cpanel.config exists	TAGS: [always]
      common : Check if EasyApache4 is used	TAGS: [clLiblsapi, easyapache]
      common : Check if csf script exists	TAGS: [csf]
      common : Check if cxs script exists	TAGS: [cxs, localconf]
      common : Check if cagefs is initialized	TAGS: [clLiblsapi, clcagefs]
      common : Check if whmapi1 exists	TAGS: [always]
      common : Check privileges	TAGS: [always]
      common : read cpanel.config	TAGS: [always]
      common : Install ipset	TAGS: [csf]
      common : download csf	TAGS: [csf]
      common : extract csf	TAGS: [csf]
      common : install csf	TAGS: [csf]
      common : remove archive	TAGS: [csf]
      common : remove folder	TAGS: [csf]
      common : update csf config	TAGS: [csfConf]
      common : update csf allow file	TAGS: [csfConf]
      common : update csf process ignore file	TAGS: [csfConf]
      common : always restart csf	TAGS: [csf, csfConf]
      common : restart lfd when csf is out of Testing mode	TAGS: [csf, csfConf]
      common : Done	TAGS: [csf]
      common : update csf custom regex	TAGS: [csfConfShared]
      common : set smtp root tweak to off	TAGS: [csfConfShared]
      common : always restart csf	TAGS: [csfConfShared]
      common : restart lfd when csf is out of Testing mode	TAGS: [csfConfShared]
      common : Include whmapi variables	TAGS: [always]
      common : Make sure manage folder exists	TAGS: [whmapi, whmapicommon]
      common : Create WHM api calls for common role	TAGS: [whmapi, whmapicommon]
      common : Run the script	TAGS: [whmapi, whmapicommon]
      sharedhosting : Include cloudlinux variables	TAGS: [always]
      sharedhosting : Create cagefs skeleton directory	TAGS: [clcagefs]
      sharedhosting : Create cagefs link	TAGS: [clcagefs]
      sharedhosting : Add cagefs	TAGS: [clcagefs]
      sharedhosting : Add lvemanager	TAGS: [clcagefs]
      sharedhosting : Initialiize cagefs skeleton	TAGS: [clcagefs]
      sharedhosting : Update cagefs skeleton	TAGS: [clcagefs]
      sharedhosting : Enable cagefs for all users	TAGS: [clcagefs]
      sharedhosting : Add php selector	TAGS: [claltphp]
      sharedhosting : Update cagefs	TAGS: [claltphp]
      sharedhosting : Update lvemanager	TAGS: [claltphp]
      sharedhosting : Make sure custom profile directory exists	TAGS: [clLiblsapi, claltphp]
      sharedhosting : Add custom EA profile	TAGS: [clLiblsapi, claltphp]
      sharedhosting : Add liblsapi	TAGS: [clLiblsapi]
      sharedhosting : Add liblsapi-devel	TAGS: [clLiblsapi]
      sharedhosting : download cloudlinux_ea3_to_ea4	TAGS: [clLiblsapi]
      sharedhosting : convert to EA4 from for EA3	TAGS: [clLiblsapi]
      sharedhosting : Add mod_lsapi for EA3	TAGS: [clLiblsapi]
      sharedhosting : Add mod_lsapi for EA4	TAGS: [clLiblsapi]
      sharedhosting : build lsphp binary for EA3	TAGS: [clLiblsapi]
      sharedhosting : prepare environment	TAGS: [clLiblsapi]
      sharedhosting : always restart httpd	TAGS: [clLiblsapi]
      sharedhosting : download cmc	TAGS: [cmc]
      sharedhosting : extract cmc	TAGS: [cmc]
      sharedhosting : install cmc	TAGS: [cmc]
      sharedhosting : remove archive	TAGS: [cmc]
      sharedhosting : remove folder	TAGS: [cmc]
      sharedhosting : Done	TAGS: [cmc]
      sharedhosting : download cmm	TAGS: [cmm]
      sharedhosting : extract cmm	TAGS: [cmm]
      sharedhosting : install cmm	TAGS: [cmm]
      sharedhosting : remove archive	TAGS: [cmm]
      sharedhosting : remove folder	TAGS: [cmm]
      sharedhosting : Done	TAGS: [cmm]
      sharedhosting : download cmq	TAGS: [cmq]
      sharedhosting : extract cmq	TAGS: [cmq]
      sharedhosting : install cmq	TAGS: [cmq]
      sharedhosting : remove archive	TAGS: [cmq]
      sharedhosting : remove folder	TAGS: [cmq]
      sharedhosting : Done	TAGS: [cmq]
      sharedhosting : update csf custom regex	TAGS: [csfConfShared]
      sharedhosting : set smtp root tweak to off	TAGS: [csfConfShared]
      sharedhosting : always restart csf	TAGS: [csfConfShared]
      sharedhosting : restart lfd when csf is out of Testing mode	TAGS: [csfConfShared]
      sharedhosting : download cxs	TAGS: [cxs]
      sharedhosting : extract cxs	TAGS: [cxs]
      sharedhosting : install cxs	TAGS: [cxs]
      sharedhosting : remove archive	TAGS: [cxs]
      sharedhosting : remove folder	TAGS: [cxs]
      sharedhosting : create quarentine folder	TAGS: [cxs]
      sharedhosting : create cxs daily cron script	TAGS: [cxs, cxsconf]
      sharedhosting : create cxs watch script	TAGS: [cxs, cxsconf]
      sharedhosting : create cxs ftp script	TAGS: [cxs, cxsconf]
      sharedhosting : create daily-cxs in cron.d	TAGS: [cxs, cxsconf]
      sharedhosting : ClamAV local rpm tag	TAGS: [cxs, cxsconf]
      sharedhosting : Fix rpm if needed for ClamAV	TAGS: [cxs, cxsconf]
      sharedhosting : create cxs ftp script	TAGS: [cxs, cxsconf]
      sharedhosting : create cxs.log	TAGS: [cxs, cxsconf]
      sharedhosting : Enable upload script	TAGS: [cxs, cxsconf]
      sharedhosting : always restart pure-ftpd	TAGS: [cxs, cxsconf]
      sharedhosting : always restart pure-uploadscript	TAGS: [cxs, cxsconf]
      sharedhosting : Add modsec vendor	TAGS: [cxs]
      sharedhosting : Enable ConfigServer cxs modsec	TAGS: [cxs]
      sharedhosting : Create cxsdaily script	TAGS: [cxs, cxsconf]
      sharedhosting : always restart httpd	TAGS: [cxs, cxsconf]
      sharedhosting : enable cxswatch	TAGS: [cxs, cxsconf]
      sharedhosting : always restart cxswatch	TAGS: [cxs, cxsconf]
      sharedhosting : Done	TAGS: [cxs]
      sharedhosting : Include whmapi variables	TAGS: [always]
      sharedhosting : Make sure manage folder exists	TAGS: [whmapi, whmapisharedhosting]
      sharedhosting : Create WHM api calls for sharedhosting role	TAGS: [whmapi, whmapisharedhosting]
      sharedhosting : Run the script	TAGS: [whmapi, whmapisharedhosting]
      TASK TAGS: [always, clLiblsapi, claltphp, clcagefs, cmc, cmm, cmq, csf, csfConf, csfConfShared, cxs, cxsconf, easyapache, localconf, whmapi, whmapicommon, whmapisharedhosting]

  play #2 (dnsonly): dnsonly	TAGS: []
    pattern: [u'dnsonly']
    hosts (1):
      ns01.brand1.com
    tasks:
      common : Check if cpanel.config exists	TAGS: [always]
      common : Check if EasyApache4 is used	TAGS: [clLiblsapi, easyapache]
      common : Check if csf script exists	TAGS: [csf]
      common : Check if cxs script exists	TAGS: [cxs, localconf]
      common : Check if cagefs is initialized	TAGS: [clLiblsapi, clcagefs]
      common : Check if whmapi1 exists	TAGS: [always]
      common : Check privileges	TAGS: [always]
      common : read cpanel.config	TAGS: [always]
      common : Install ipset	TAGS: [csf]
      common : download csf	TAGS: [csf]
      common : extract csf	TAGS: [csf]
      common : install csf	TAGS: [csf]
      common : remove archive	TAGS: [csf]
      common : remove folder	TAGS: [csf]
      common : update csf config	TAGS: [csfConf]
      common : update csf allow file	TAGS: [csfConf]
      common : update csf process ignore file	TAGS: [csfConf]
      common : always restart csf	TAGS: [csf, csfConf]
      common : restart lfd when csf is out of Testing mode	TAGS: [csf, csfConf]
      common : Done	TAGS: [csf]
      common : update csf custom regex	TAGS: [csfConfShared]
      common : set smtp root tweak to off	TAGS: [csfConfShared]
      common : always restart csf	TAGS: [csfConfShared]
      common : restart lfd when csf is out of Testing mode	TAGS: [csfConfShared]
      common : Include whmapi variables	TAGS: [always]
      common : Make sure manage folder exists	TAGS: [whmapi, whmapicommon]
      common : Create WHM api calls for common role	TAGS: [whmapi, whmapicommon]
      common : Run the script	TAGS: [whmapi, whmapicommon]
      dnsonly : Include whmapi variables	TAGS: [always]
      dnsonly : Make sure manage folder exists	TAGS: [whmapi, whmapidnsonly]
      dnsonly : Create WHM api calls for dnsonly role	TAGS: [whmapi, whmapidnsonly]
      dnsonly : Run the script	TAGS: [whmapi, whmapidnsonly]
      TASK TAGS: [always, clLiblsapi, clcagefs, csf, csfConf, csfConfShared, cxs, easyapache, localconf, whmapi, whmapicommon, whmapidnsonly]

  play #3 (mailonly): mailonly	TAGS: []
    pattern: [u'mailonly']
    hosts (1):
      ms01.brand2.com
    tasks:
      common : Check if cpanel.config exists	TAGS: [always]
      common : Check if EasyApache4 is used	TAGS: [clLiblsapi, easyapache]
      common : Check if csf script exists	TAGS: [csf]
      common : Check if cxs script exists	TAGS: [cxs, localconf]
      common : Check if cagefs is initialized	TAGS: [clLiblsapi, clcagefs]
      common : Check if whmapi1 exists	TAGS: [always]
      common : Check privileges	TAGS: [always]
      common : read cpanel.config	TAGS: [always]
      common : Install ipset	TAGS: [csf]
      common : download csf	TAGS: [csf]
      common : extract csf	TAGS: [csf]
      common : install csf	TAGS: [csf]
      common : remove archive	TAGS: [csf]
      common : remove folder	TAGS: [csf]
      common : update csf config	TAGS: [csfConf]
      common : update csf allow file	TAGS: [csfConf]
      common : update csf process ignore file	TAGS: [csfConf]
      common : always restart csf	TAGS: [csf, csfConf]
      common : restart lfd when csf is out of Testing mode	TAGS: [csf, csfConf]
      common : Done	TAGS: [csf]
      common : update csf custom regex	TAGS: [csfConfShared]
      common : set smtp root tweak to off	TAGS: [csfConfShared]
      common : always restart csf	TAGS: [csfConfShared]
      common : restart lfd when csf is out of Testing mode	TAGS: [csfConfShared]
      common : Include whmapi variables	TAGS: [always]
      common : Make sure manage folder exists	TAGS: [whmapi, whmapicommon]
      common : Create WHM api calls for common role	TAGS: [whmapi, whmapicommon]
      common : Run the script	TAGS: [whmapi, whmapicommon]
      mailonly : Include whmapi variables	TAGS: [always]
      mailonly : Make sure manage folder exists	TAGS: [whmapi, whmapimailonly]
      mailonly : Create WHM api calls for mailonly role	TAGS: [whmapi, whmapimailonly]
      mailonly : Run the script	TAGS: [whmapi, whmapimailonly]
      TASK TAGS: [always, clLiblsapi, clcagefs, csf, csfConf, csfConfShared, cxs, easyapache, localconf, whmapi, whmapicommon, whmapimailonly]

  play #4 (ftponly): ftponly	TAGS: []
    pattern: [u'ftponly']
    hosts (1):
      ftp03.brand1.com
    tasks:
      common : Check if cpanel.config exists	TAGS: [always]
      common : Check if EasyApache4 is used	TAGS: [clLiblsapi, easyapache]
      common : Check if csf script exists	TAGS: [csf]
      common : Check if cxs script exists	TAGS: [cxs, localconf]
      common : Check if cagefs is initialized	TAGS: [clLiblsapi, clcagefs]
      common : Check if whmapi1 exists	TAGS: [always]
      common : Check privileges	TAGS: [always]
      common : read cpanel.config	TAGS: [always]
      common : Install ipset	TAGS: [csf]
      common : download csf	TAGS: [csf]
      common : extract csf	TAGS: [csf]
      common : install csf	TAGS: [csf]
      common : remove archive	TAGS: [csf]
      common : remove folder	TAGS: [csf]
      common : update csf config	TAGS: [csfConf]
      common : update csf allow file	TAGS: [csfConf]
      common : update csf process ignore file	TAGS: [csfConf]
      common : always restart csf	TAGS: [csf, csfConf]
      common : restart lfd when csf is out of Testing mode	TAGS: [csf, csfConf]
      common : Done	TAGS: [csf]
      common : update csf custom regex	TAGS: [csfConfShared]
      common : set smtp root tweak to off	TAGS: [csfConfShared]
      common : always restart csf	TAGS: [csfConfShared]
      common : restart lfd when csf is out of Testing mode	TAGS: [csfConfShared]
      common : Include whmapi variables	TAGS: [always]
      common : Make sure manage folder exists	TAGS: [whmapi, whmapicommon]
      common : Create WHM api calls for common role	TAGS: [whmapi, whmapicommon]
      common : Run the script	TAGS: [whmapi, whmapicommon]
      TASK TAGS: [always, clLiblsapi, clcagefs, csf, csfConf, csfConfShared, cxs, easyapache, localconf, whmapi, whmapicommon]
